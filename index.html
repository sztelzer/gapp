<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="format-detection" content="telephone=no" />
	<link type="text/css" rel="stylesheet" href="fonts/fonts.css">
	<link type="text/css" rel="stylesheet" href="able.css">
	<link type="text/css" rel="stylesheet" href="able-animation.css">
	<link type="text/css" rel="stylesheet" href="components/angular-material.css">
	<title>Able</title>
</head>

<body layout="column" flex app-element>
	<div class="app page {{$state.current.name}} animated" ui-view flex layout-fill></div>
	<script defer src='https://maps.googleapis.com/maps/api/js?key=AIzaSyAEm-VPSgk4IkJ4QGopMMxv22togud0tZ8&libraries=places&language=pt-BR'></script>

	<script src="cordova.js"></script>
	<script src="components/angular.js"></script>
	<script src='components/angular-locale_pt-br.js'></script>
	<script src='components/angular-animate.js'></script>
	<script src='components/angular-aria.js'></script>
	<script src='components/angular-ui-router.js'></script>
	<script src='components/ct-ui-router-extras.js'></script>
	<script src='components/angular-messages.js'></script>
	<script src='components/ngStorage.js'></script>
	<script src='components/angular-material.js'></script>
	<script src='components/geolib.js'></script>
	<script src='components/angular-payments.js'></script>
	<script src='components/angular.dcb-img-fallback.js'></script>
	<script src='able.js'></script>
	<script src='able-auth.js'></script>
	<script src='able-signin.js'></script>
	<script src='able-offer.js'></script>
	<script src='able-cart.js'></script>
	<script src='able-map.js'></script>
	<script src='able-feedbacks.js'></script>
	<script src='able-orders.js'></script>
	<script src='able-confirmation.js'></script>
	<script src='able-quest.js'></script>
	<script src='able-plastics.js'></script>
	<script src='able-toolbar.js'></script>
	<script src='https://js.stripe.com/v2/'></script>

	<script>
		angular.element(document).ready(function () {
			if (window.cordova) {
				console.log('cordova')
				document.addEventListener('deviceready', function () {
					if(navigator.onLine){
						console.log('online')
						bootOnlineCordova()
					} else {
						navigator.notification.alert('Você precisa estar conectado para usar este aplicativo.', refreshPage, 'Able', 'Tentar Novamente')
					}
				}, false);
			} else {
				console.log('web')
				if(navigator.onLine){
					console.log('online')
					bootOnlineBrowser()
				} else {
					window.alert('Você precisa estar conectado para usar este aplicativo. Vamos aguardar você se conectar. Quando estiver conectado, recarregue esta página.')
				}
			}
		})

		function bootOnlineBrowser(){
			angular.bootstrap(document, ['able'])
		}

		function bootOnlineCordova(){
			Keyboard.shrinkView(true);
			Keyboard.hideFormAccessoryBar(false);
			//Keyboard.disableScrollingInShrinkView(true);
			Keyboard.automaticScrollToTopOnHiding = true;
			angular.bootstrap(document, ['able'])
		}

		function refreshPage(){
			window.location.reload()
		}
	</script>


	<script type="text/javascript">
		Object.size = function(obj) {
			var size = 0, key;
			for (key in obj) {
				if (obj.hasOwnProperty(key)) size++;
			}
			return size;
		};

		function testCpf(strCPF) {
		  var Soma;
		  var Resto;
		  Soma = 0;
		  if (strCPF == "00000000000")
			return false;
		  for (i=1; i<=9; i++)
			Soma = Soma + parseInt(strCPF.substring(i-1, i)) * (11 - i);
			Resto = (Soma * 10) % 11;
		  if ((Resto == 10) || (Resto == 11))
			Resto = 0;
		  if (Resto != parseInt(strCPF.substring(9, 10)) )
			return false;
		  Soma = 0;
		  for (i = 1; i <= 10; i++)
			Soma = Soma + parseInt(strCPF.substring(i-1, i)) * (12 - i);
			Resto = (Soma * 10) % 11;
		  if ((Resto == 10) || (Resto == 11))
			Resto = 0;
		  if (Resto != parseInt(strCPF.substring(10, 11) ) )
			return false;
		  return true;
		}
	</script>

</body>

</html>
